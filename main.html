<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="jquery-3.7.1.js"></script>
    <style>
        #result{
            width: 200px;
            height: 100px;
            border: solid 1px #90b;
        }
    </style>
    <script>
        $(function () {
            $('#send_button').click(function () {
                let xhr = new XMLHttpRequest()
                // xhr.open('GET','http://localhost:8000/main')
                // xhr.send()
                // xhr.onreadystatechange = function () {
                //     if(xhr.readyState===4){
                //         if(xhr.status>=200 && xhr.status<300){
                //             console.log(xhr.status)
                //             console.log(xhr.statusText)
                //             console.log(xhr.getAllResponseHeaders())
                //             console.log(xhr.response)
                //             $('#result').html(xhr.response)
                //         }else{
                //         }
                //     }
                // }

                // xhr.open('POST','http://localhost:8000/main')
                // xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded')
                // xhr.send('a=100&b=200')
                // xhr.onreadystatechange = function () {
                //     if(xhr.readyState===4){
                //         if(xhr.status>=200 && xhr.status<300){
                //             console.log(xhr.status)
                //             console.log(xhr.statusText)
                //             console.log(xhr.getAllResponseHeaders())
                //             console.log(xhr.response)
                //             $('#result').html(xhr.response)
                //         }else{
                //         }
                //     }
                // }
                let data = {
                    a : 100,
                    b : 200
                }
                xhr.responseType = 'json'
                xhr.open('POST','http://localhost:8000/json-server')
                xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded')
                xhr.send(JSON.stringify(data))
                xhr.onreadystatechange = function () {
                    if(xhr.readyState===4){
                        if(xhr.status>=200 && xhr.status<300){
                            console.log(xhr.status)
                            console.log(xhr.statusText)
                            console.log(xhr.getAllResponseHeaders())
                            console.log(xhr.response)
                            // let data = JSON.parse(xhr.response)
                            // console.log(data)
                            $('#result').html("a:"+xhr.response.a+" b:"+xhr.response.b)
                        }else{
                        }
                    }
                }
                // let data = {
                //     a : 100,
                //     b : 200
                // }
                // $.ajax({
                //     type :"POST",
                //     url : 'http://localhost:8000/main',
                //     data : data,
                //     processData: false,
                //     success: function (response) {
                //         console.log(response)
                //         $('#result').html(response.str)
                //     }
                // })
            })
        })
    </script>
</head>
<body>
<button id="send_button">点击发送请求</button>
<div id="result"></div>
</body>
</html>